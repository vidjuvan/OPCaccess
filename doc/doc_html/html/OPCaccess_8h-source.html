<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<Title> Tango Device Server User's Guide </Title>
   <META NAME="GENERATOR" CONTENT="Mozilla/3.01Gold (X11; I; HP-UX B.10.20 9000/735) [Netscape]">
   <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#7F00FF" ALINK="#FF0000">

<P><!-------TITLE------></P>
<TABLE BORDER="0" WIDTH="100%">
    <TR>
        <TD ALIGN="left">
			<A HREF=http://www.esrf.fr>
			<IMG SRC="http://www.esrf.fr/gifs/logo/80.gif" BORDER=0></A>
		</Td>
        <TD ALIGN="center">
			<A HREF=http://www.elettra.trieste.it/>
			<IMG SRC="http://www.esrf.fr/tango/elettra_logo.gif" BORDER=0></A>

		</Td>
        <TD ALIGN="right">
			<A HREF=http://www.synchrotron-soleil.fr/>
			<IMG SRC="http://www.esrf.fr/tango/soleil_logo.gif" BORDER=0></A>
		</Td>
    	 <Td>
			<H1><FONT COLOR="#0000FF">
			<Center>TANGO <Br> Device Server
			</Center></FONT>
    	</Td>
    </TR>
</TABLE>
<Br>


</Body>
</Html>
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OPCaccess.h</h1><a href="OPCaccess_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//=============================================================================</font>
00002 <font class="comment">//</font>
00003 <font class="comment">// file :        OPCaccess.h</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// description : Include for the OPCaccess class.</font>
00006 <font class="comment">//</font>
00007 <font class="comment">// project :    A generic class to access OPC servers</font>
00008 <font class="comment">//</font>
00009 <font class="comment">// $Author: jensmeyer $</font>
00010 <font class="comment">//</font>
00011 <font class="comment">// $Revision: 1.1.1.1 $</font>
00012 <font class="comment">//</font>
00013 <font class="comment">// $Log: not supported by cvs2svn $
00013 <font class="comment">// Revision 1.2  2004/11/17 15:57:16  meyer
00013 <font class="comment">// Update documentation and added support for OPC servers without array handling.
00013 <font class="comment">//</font>
00014 <font class="comment">// Revision 1.1.1.1  2004/11/08 09:21:08  meyer</font>
00015 <font class="comment">// Imported using TkCVS</font>
00016 <font class="comment">//</font>
00017 <font class="comment">// Revision 1.6  2004/10/27 14:29:41  meyer</font>
00018 <font class="comment">//  Tested version!</font>
00019 <font class="comment">//</font>
00020 <font class="comment">// Revision 1.5  2004/10/25 16:44:17  meyer</font>
00021 <font class="comment">// Cleaned-up</font>
00022 <font class="comment">//</font>
00023 <font class="comment">// Revision 1.4  2004/10/25 16:07:19  meyer</font>
00024 <font class="comment">// Tested per item access.</font>
00025 <font class="comment">//</font>
00026 <font class="comment">// Revision 1.3  2004/10/25 10:49:05  meyer</font>
00027 <font class="comment">// OPC item as structure!</font>
00028 <font class="comment">//</font>
00029 <font class="comment">// Revision 1.2  2004/10/22 13:51:33  meyer</font>
00030 <font class="comment">// *** empty log message ***</font>
00031 <font class="comment">//</font>
00032 <font class="comment">// Revision 1.1  2004/10/20 11:42:34  meyer</font>
00033 <font class="comment">// Initial revision</font>
00034 <font class="comment">//</font>
00035 <font class="comment">//</font>
00036 <font class="comment">// copyleft :    European Synchrotron Radiation Facility</font>
00037 <font class="comment">//               BP 220, Grenoble 38043</font>
00038 <font class="comment">//               FRANCE</font>
00039 <font class="comment">//</font>
00040 <font class="comment">//=============================================================================</font>
00041 <font class="comment">//</font>
00042 <font class="comment">//              This file is generated by POGO</font>
00043 <font class="comment">//      (Program Obviously used to Generate tango Object)</font>
00044 <font class="comment">//</font>
00045 <font class="comment">//         (c) - Software Engineering Group - ESRF</font>
00046 <font class="comment">//=============================================================================</font>
00047 <font class="preprocessor">#ifndef _OPCACCESS_H</font>
00048 <font class="preprocessor"></font><font class="preprocessor">#define _OPCACCESS_H</font>
00049 <font class="preprocessor"></font>
00050 <font class="preprocessor">#include &lt;tango.h&gt;</font>
00051 
00052 <font class="preprocessor">#if _MSC_VER &gt; 1000</font>
00053 <font class="preprocessor"></font><font class="preprocessor">#pragma once</font>
00054 <font class="preprocessor"></font><font class="preprocessor">#endif // _MSC_VER &gt; 1000</font>
00055 <font class="preprocessor"></font><font class="preprocessor">#include &lt;strstream&gt;</font>
00056 
00057 <font class="preprocessor">#include "<a class="code" href="opcda_8h.html">opcda.h</a>"</font>
00058 <font class="preprocessor">#include "<a class="code" href="opccomn_8h.html">opccomn.h</a>"</font>
00059 <font class="preprocessor">#include "interface.h"</font>
00060 
00061 
00062 
00063 
00064 <font class="comment">//using namespace Tango;</font>
00065 
00071  <font class="comment">//     Add your own constants definitions here.</font>
00072  <font class="comment">//-----------------------------------------------</font>
00073 
<a name="l00074"></a><a class="code" href="OPCaccess_8h.html#a0">00074</a> <font class="preprocessor">#define H_CLIENT_USE            10</font>
00075 <font class="preprocessor"></font>
00076 <font class="comment">// Item handles</font>
00077 
<a name="l00078"></a><a class="code" href="structOpcItem.html">00078</a> <font class="keyword">typedef</font> <font class="keyword">struct </font>
00079 <font class="keyword">                </font>{
<a name="l00080"></a><a class="code" href="structOpcItem.html#m0">00080</a>                 string                          item_name;
<a name="l00081"></a><a class="code" href="structOpcItem.html#m1">00081</a>                 string                          attr_name;
00082                 
<a name="l00083"></a><a class="code" href="structOpcItem.html#m2">00083</a>                 <a class="code" href="opcda_8h.html#a43">OPCHANDLE</a>                       itemHandle;
<a name="l00084"></a><a class="code" href="structOpcItem.html#m3">00084</a>                 DWORD                                   accessRight;
<a name="l00085"></a><a class="code" href="structOpcItem.html#m4">00085</a>                 <font class="keywordtype">short</font>                                   connected;
<a name="l00086"></a><a class="code" href="structOpcItem.html#m5">00086</a>                 <a class="code" href="opcda_8h.html#a36">OPCDATASOURCE</a>           data_source;
<a name="l00087"></a><a class="code" href="structOpcItem.html#m6">00087</a>                 <a class="code" href="structtagOPCITEMSTATE.html">OPCITEMSTATE</a>            *pItemState;
<a name="l00088"></a><a class="code" href="structOpcItem.html#m7">00088</a>                 HRESULT                         *pErrors;
<a name="l00089"></a><a class="code" href="structOpcItem.html#m8">00089</a>                 time_t                          last_read_time;
<a name="l00090"></a><a class="code" href="structOpcItem.html#m9">00090</a>                 <font class="keywordtype">long</font>                            req_data_type;
00091                 } <a class="code" href="structOpcItem.html">OpcItem</a>;
00092 
00093 
00094 <font class="keyword">namespace </font>OPCaccess
00095 {
00096 
00110 <font class="comment">/*</font>
00111 <font class="comment"> *      Device States Description:</font>
00112 <font class="comment"> *      Tango::UNKNOWN :        No connection to the OPC server</font>
00113 <font class="comment"> *      Tango::ALARM :  One or more data items are invalid</font>
00114 <font class="comment"> *      Tango::ON :     OPC server access is OK</font>
00115 <font class="comment"> *      Tango::FAULT :  The used OPC server indicates a fault.</font>
00116 <font class="comment"> */</font>
00117 
00118 
<a name="l00119"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html">00119</a> <font class="keyword">class </font>OPCaccess: <font class="keyword">public</font> Tango::Device_2Impl
00120 {
00121 <font class="keyword">public</font> :
00122         <font class="comment">//      Add your own data members here</font>
00123         <font class="comment">//-----------------------------------------</font>
00124 
00125         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#a0">start</a>();
00126         
00127         <font class="comment">//      Here is the Start of the automatic code generation part</font>
00128         <font class="comment">//------------------------------------------------------------- </font>
00134 <font class="comment"></font>
00135 
<a name="l00146"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_0">00146</a>         Tango::DevShort <a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_0">dataFromCache</a>;
<a name="l00150"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_1">00150</a>         string  <a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_1">server_name</a>;
<a name="l00154"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_2">00154</a>         string  <a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_2">path_name</a>;
<a name="l00159"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_3">00159</a>         vector&lt;string&gt;  <a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_3">item_names</a>;
<a name="l00164"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_4">00164</a>         string  <a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_4">data_type</a>;
<a name="l00171"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_5">00171</a>         string  <a class="code" href="classOPCaccess_1_1OPCaccess.html#z1_5">array_handling</a>;
00173 
00183         <a class="code" href="classOPCaccess_1_1OPCaccess.html#z2_0">OPCaccess</a>(Tango::DeviceClass *,string &amp;);
00190         <a class="code" href="classOPCaccess_1_1OPCaccess.html#z2_0">OPCaccess</a>(Tango::DeviceClass *,<font class="keyword">const</font> <font class="keywordtype">char</font> *);
00198         <a class="code" href="classOPCaccess_1_1OPCaccess.html#z2_0">OPCaccess</a>(Tango::DeviceClass *,<font class="keyword">const</font> <font class="keywordtype">char</font> *,<font class="keyword">const</font> <font class="keywordtype">char</font> *);
00200 
<a name="l00207"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#z3_0">00207</a>         <a class="code" href="classOPCaccess_1_1OPCaccess.html#z3_0">~OPCaccess</a>() {<a class="code" href="classOPCaccess_1_1OPCaccess.html#z3_1">delete_device</a>();};
00211         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#z3_1">delete_device</a>();
00213 
00214         
00220         <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#z4_0">init_device</a>();
00224         <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#z4_1">always_executed_hook</a>();
00225 
00227 
00238         <font class="keyword">virtual</font> Tango::DevState <a class="code" href="classOPCaccess_1_1OPCaccess.html#z5_0">dev_state</a>();
00244         <font class="keyword">virtual</font> Tango::ConstDevString   <a class="code" href="classOPCaccess_1_1OPCaccess.html#z5_1">dev_status</a>();
00249         <font class="keywordtype">void</font>    <a class="code" href="classOPCaccess_1_1OPCaccess.html#z5_2">read_cache</a>();
00254         <font class="keywordtype">void</font>    <a class="code" href="classOPCaccess_1_1OPCaccess.html#z5_3">read_direct</a>();
00255 
00259          <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#z5_4">get_device_property</a>();
00261 
00262         <font class="comment">//      Here is the end of the automatic code generation part</font>
00263         <font class="comment">//------------------------------------------------------------- </font>
00264 
00265 
00266 
00267 <font class="keyword">protected</font> :     
00268         <font class="comment">//      Add your own data members here</font>
00269         <font class="comment">//-----------------------------------------</font>
00270         
00271         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#b0">ConnectServer</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> *);
00272         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#b1">CreateGroup</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> *, <font class="keyword">const</font> <font class="keywordtype">char</font> *);
00273         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#b2">CreateItem</a>(<font class="keywordtype">char</font> *, <font class="keywordtype">long</font>);
00274         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#b2">CreateItem</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> *, <font class="keyword">const</font> <font class="keywordtype">char</font> *);
00275         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#b4">BuildItem</a>(<font class="keywordtype">char</font> *, <a class="code" href="structOpcItem.html">OpcItem</a> *item);
00276         
00277         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#b5">ReadItem</a>(<a class="code" href="structOpcItem.html">OpcItem</a> *item);
00278         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#b6">WriteItem</a> (<a class="code" href="structOpcItem.html">OpcItem</a> *item, <font class="keywordtype">short</font>  value);
00279         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#b6">WriteItem</a> (<a class="code" href="structOpcItem.html">OpcItem</a> *item, <font class="keywordtype">long</font>   value);
00280         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#b6">WriteItem</a> (<a class="code" href="structOpcItem.html">OpcItem</a> *item, <font class="keywordtype">double</font> value);   
00281         <font class="keywordtype">void</font> <a class="code" href="classOPCaccess_1_1OPCaccess.html#b9">set_value</a> (<a class="code" href="structOpcItem.html">OpcItem</a> *item, COleVariant *var_val);   
00282         
00283         <font class="keyword">const</font> <font class="keywordtype">char</font> *<a class="code" href="classOPCaccess_1_1OPCaccess.html#b10">GetErrorString</a>(HRESULT);
00284         <font class="keywordtype">char</font> *<a class="code" href="classOPCaccess_1_1OPCaccess.html#b11">devname2grpname</a>();
00285         
00286         <font class="comment">// Server object interface ptr</font>
<a name="l00287"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#n0">00287</a>         CInterface &lt;IOPCServer, &amp;IID_IOPCServer&gt; <a class="code" href="classOPCaccess_1_1OPCaccess.html#n0">m_IOPCServer</a>;
00288 
00289         <font class="comment">// Group object interface ptr</font>
<a name="l00290"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#n1">00290</a>         <a class="code" href="classCInterface.html">CInterface&lt;IOPCItemMgt, &amp;IID_IOPCItemMgt&gt;</a> <a class="code" href="classOPCaccess_1_1OPCaccess.html#n1">m_IOPCItemMgt</a>;
<a name="l00291"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#n2">00291</a>         <a class="code" href="classCInterface.html">CInterface&lt;IOPCSyncIO, &amp;IID_IOPCSyncIO&gt;</a>   <a class="code" href="classOPCaccess_1_1OPCaccess.html#n2">m_IOPCSyncIO</a>;
<a name="l00292"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#n3">00292</a>         <a class="code" href="classCInterface.html">CInterface&lt;IOPCGroupStateMgt, &amp;IID_IOPCGroupStateMgt&gt;</a> <a class="code" href="classOPCaccess_1_1OPCaccess.html#n3">m_IOPCGroupStateMgt</a>;
00293 
00294         <font class="comment">// Server handle of the group</font>
<a name="l00295"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#n4">00295</a>         <a class="code" href="opcda_8h.html#a43">OPCHANDLE</a> <a class="code" href="classOPCaccess_1_1OPCaccess.html#n4">m_hServerGroup</a>;
00296         <font class="comment">// Connection</font>
<a name="l00297"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#n5">00297</a>         DWORD     <a class="code" href="classOPCaccess_1_1OPCaccess.html#n5">m_dwConnection</a>;
00298 
00299         <font class="comment">//COPCDataCallback *m_pCallback;        // IOPCDataCallback implementation</font>
00300                 
<a name="l00301"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#n6">00301</a>         vector &lt;OpcItem&gt;     <a class="code" href="classOPCaccess_1_1OPCaccess.html#n6">opc_items</a>;
<a name="l00302"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#n7">00302</a>         <a class="code" href="opcda_8h.html#a36">OPCDATASOURCE</a>                   <a class="code" href="classOPCaccess_1_1OPCaccess.html#n7">data_source</a>;
<a name="l00303"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#n8">00303</a>         <font class="keywordtype">long</font>                                            <a class="code" href="classOPCaccess_1_1OPCaccess.html#n8">req_data_type</a>;
<a name="l00304"></a><a class="code" href="classOPCaccess_1_1OPCaccess.html#n9">00304</a>         <font class="keywordtype">short</font>                                 <a class="code" href="classOPCaccess_1_1OPCaccess.html#n9">create_flag</a>;
00305 };
00306 
00307 }       <font class="comment">// namespace</font>
00308 
00309 <font class="preprocessor">#endif  // _OPCACCESS_H</font>
</pre></div>
<Center>
<Br>
<HR WIDTH="100%"></H5>
<H3> ESRF - Software Engineering Group </H33>
</Center>
</body>
</html>
