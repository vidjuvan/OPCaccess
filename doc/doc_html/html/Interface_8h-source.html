<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<Title> Tango Device Server User's Guide </Title>
   <META NAME="GENERATOR" CONTENT="Mozilla/3.01Gold (X11; I; HP-UX B.10.20 9000/735) [Netscape]">
   <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#7F00FF" ALINK="#FF0000">

<P><!-------TITLE------></P>
<TABLE BORDER="0" WIDTH="100%">
    <TR>
        <TD ALIGN="left">
			<A HREF=http://www.esrf.fr>
			<IMG SRC="http://www.esrf.fr/gifs/logo/80.gif" BORDER=0></A>
		</Td>
        <TD ALIGN="center">
			<A HREF=http://www.elettra.trieste.it/>
			<IMG SRC="http://www.esrf.fr/tango/elettra_logo.gif" BORDER=0></A>

		</Td>
        <TD ALIGN="right">
			<A HREF=http://www.synchrotron-soleil.fr/>
			<IMG SRC="http://www.esrf.fr/tango/soleil_logo.gif" BORDER=0></A>
		</Td>
    	 <Td>
			<H1><FONT COLOR="#0000FF">
			<Center>TANGO <Br> Device Server
			</Center></FONT>
    	</Td>
    </TR>
</TABLE>
<Br>


</Body>
</Html>
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Interface.h</h1><a href="Interface_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">// Interface.h: interface for the CInterface class.</font>
00002 <font class="comment">//</font>
00003 <font class="comment">// This class is a helper to use the interface pointers (Query/Release)</font>
00005 <font class="comment"></font>
00006 <font class="preprocessor">#if !defined(AFX_INTERFACE_H)</font>
<a name="l00007"></a><a class="code" href="Interface_8h.html#a0">00007</a> <font class="preprocessor"></font><font class="preprocessor">#define AFX_INTERFACE_H</font>
00008 <font class="preprocessor"></font>
<a name="l00009"></a><a class="code" href="classCInterface.html">00009</a> <font class="keyword">template</font> &lt;<font class="keyword">class</font> I, const IID* pIID&gt; <font class="keyword">class </font><a class="code" href="classCInterface.html">CInterface</a>  
00010 {
00011 <font class="keyword">public</font>:
00012 
<a name="l00013"></a><a class="code" href="classCInterface.html#a0">00013</a>         <a class="code" href="classCInterface.html#a0">CInterface</a>()
00014         {
00015                 <a class="code" href="classCInterface.html#n0">m_pI</a> = NULL;
00016         }
00017 
<a name="l00018"></a><a class="code" href="classCInterface.html#a1">00018</a>         <a class="code" href="classCInterface.html#a1">~CInterface</a>()
00019         {
00020                 <a class="code" href="classCInterface.html#a3">Release</a>();
00021         }
00022 
00023 <font class="keyword">protected</font>:
<a name="l00024"></a><a class="code" href="classCInterface.html#n0">00024</a>         I* <a class="code" href="classCInterface.html#n0">m_pI</a>;
00025 
00026 <font class="keyword">public</font>:
00027 
<a name="l00028"></a><a class="code" href="classCInterface.html#a2">00028</a>         HRESULT <a class="code" href="classCInterface.html#a2">Query</a>(LPUNKNOWN pIUnknown)
00029         {
00030                 ASSERT(pIUnknown);
00031                 ASSERT(<a class="code" href="classCInterface.html#n0">m_pI</a>==NULL);
00032                 <font class="keywordflow">if</font> (pIUnknown)
00033                 {
00034                         HRESULT hr = pIUnknown-&gt;QueryInterface(*pIID, (LPVOID*)&amp;<a class="code" href="classCInterface.html#n0">m_pI</a>);
00035                         <font class="keywordflow">if</font> (FAILED(hr))
00036                         {
00037                                 <a class="code" href="classCInterface.html#n0">m_pI</a> = NULL;
00038                         }
00039                         <font class="keywordflow">return</font> hr;
00040                 }
00041                 <font class="keywordflow">else</font>
00042                 {
00043                         <font class="keywordflow">return</font> E_FAIL;
00044                 }
00045         }
00046 
<a name="l00047"></a><a class="code" href="classCInterface.html#a3">00047</a>         <font class="keywordtype">void</font> <a class="code" href="classCInterface.html#a3">Release</a>()
00048         {
00049                 <font class="keywordflow">if</font> (<a class="code" href="classCInterface.html#n0">m_pI</a>!=NULL)
00050                 {
00051                         <a class="code" href="classCInterface.html#n0">m_pI</a>-&gt;Release();
00052                         <a class="code" href="classCInterface.html#n0">m_pI</a> = NULL;
00053                 }
00054         }
00055 
<a name="l00056"></a><a class="code" href="classCInterface.html#a4">00056</a>         I* <a class="code" href="classCInterface.html#a4">operator-&gt;</a>()
00057         {
00058                 ASSERT(<a class="code" href="classCInterface.html#n0">m_pI</a>);
00059                 <font class="keywordflow">return</font> <a class="code" href="classCInterface.html#n0">m_pI</a>;
00060         }
00061 
<a name="l00062"></a><a class="code" href="classCInterface.html#a5">00062</a>         I** <a class="code" href="classCInterface.html#a5">operator&amp;</a>()
00063         {
00064                 <font class="keywordflow">return</font> &amp;<a class="code" href="classCInterface.html#n0">m_pI</a>;
00065         }
00066 
<a name="l00067"></a><a class="code" href="classCInterface.html#a6">00067</a>         <a class="code" href="classCInterface.html#a6">operator I*</a>()
00068         {
00069                 <font class="keywordflow">return</font> <a class="code" href="classCInterface.html#n0">m_pI</a>;
00070         }
00071 };
00072 
00073 <font class="preprocessor">#endif</font>
</pre></div>
<Center>
<Br>
<HR WIDTH="100%"></H5>
<H3> ESRF - Software Engineering Group </H33>
</Center>
</body>
</html>
